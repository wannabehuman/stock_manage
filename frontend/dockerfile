# Node.js 이미지를 기반으로 시작
FROM node:18 AS base

# 작업 디렉토리 설정
WORKDIR /frontend/react-app/

# package.json과 package-lock.json 복사
COPY ./react-app/package*.json ./

# TypeScript 관련 파일 복사
COPY ./react-app/tsconfig*.json ./

# 필요한 패키지 설치
RUN npm install
RUN npm install react-router-dom @mui/material @mui/icons-material @emotion/react @emotion/styled
RUN npm install axios formik yup

# 개발 단계 설정
FROM base AS development

# 환경 변수 설정
ENV NODE_ENV=development

# 소스 코드 복사
COPY ./react-app/ ./

# 기본 포트 노출 (React 개발 서버 기본 포트)
EXPOSE 5173

# Vite 개발 서버 실행 - 호스트 설정 추가
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]